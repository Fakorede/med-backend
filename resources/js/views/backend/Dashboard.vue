<template>
     <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="card card-block card-stretch card-height position-relative overflow-hidden card-overlay-image">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="mm-cart-image text-primary">
                                <svg class="svg-icon svg-blue mr-4" id="h-03" width="50" height="52" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /> </svg>
                            </div>
                            <div class="mm-cart-text">
                                <h2 class="font-weight-700">2743</h2>
                                <p class="mb-0 text-primary">Total Users</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card card-block card-stretch card-height  position-relative overflow-hidden card-overlay-image">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="mm-cart-image">
                                <svg width="52" height="52" viewBox="0 0 52 52" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M39.5586 27.1172C33.0403 27.1172 27.6774 32.156 27.1588 38.543H24.8412C24.6245 35.8745 23.5621 33.4418 21.9232 31.5132L31.5089 21.9274C32.4719 22.7465 33.5465 23.4102 34.716 23.9047C36.2497 24.5538 37.8787 24.8828 39.5586 24.8828C41.2384 24.8828 42.8675 24.5537 44.4011 23.9048C45.8829 23.2781 47.2134 22.3813 48.3559 21.2388C49.4985 20.0962 50.3953 18.7657 51.022 17.2839C51.6709 15.7503 52 14.1213 52 12.4414C52 10.9474 51.738 9.48492 51.2199 8.09758C51.0727 7.70148 50.6897 7.43641 50.2684 7.43641C50.1475 7.43641 50.0287 7.45773 49.9139 7.50039C49.66 7.59484 49.4579 7.78273 49.3451 8.02953C49.2324 8.27633 49.2222 8.55258 49.3167 8.80648C49.7494 9.96734 49.9688 11.1902 49.9688 12.4414C49.9688 14.6385 49.2911 16.7319 48.0369 18.4845C46.8998 16.4948 45.1826 14.9874 43.1649 14.1633C44.3746 13.1379 45.1445 11.6087 45.1445 9.90234C45.1445 6.82226 42.6387 4.31641 39.5586 4.31641C36.4785 4.31641 33.9727 6.82226 33.9727 9.90234C33.9727 11.6083 34.7422 13.1372 35.9515 14.1627C33.9335 14.9863 32.2159 16.4931 31.0786 18.4823C29.8255 16.7301 29.1484 14.6376 29.1484 12.4414C29.1484 9.66164 30.2321 7.04742 32.1973 5.08016C34.1646 3.11492 36.7788 2.03125 39.5586 2.03125C41.0169 2.03125 42.4277 2.3268 43.7511 2.90977C43.881 2.96664 44.0192 2.99609 44.1603 2.99609C44.5625 2.99609 44.9282 2.75844 45.0906 2.38977C45.3161 1.87688 45.0825 1.27664 44.5706 1.05117C42.9873 0.353438 41.3024 0 39.5606 0H39.5586C37.8787 0 36.2497 0.329063 34.716 0.978047C33.2342 1.60469 31.9038 2.50148 30.7612 3.64406C29.6187 4.78664 28.7219 6.11711 28.0952 7.59891C27.4463 9.1325 27.1172 10.7616 27.1172 12.4414C27.1172 14.1213 27.4463 15.7503 28.0952 17.2839C28.5898 18.4534 29.2534 19.5281 30.0726 20.4911L20.4869 30.0769C18.5582 28.438 16.1256 27.3756 13.4571 27.1589V24.8412C19.844 24.3226 24.8828 18.9597 24.8828 12.4414C24.8828 5.58116 19.3016 0 12.4414 0C5.58116 0 0 5.58116 0 12.4414C0 18.9597 5.03882 24.3226 11.4258 24.8412V27.1589C5.03882 27.6774 0 33.0403 0 39.5586C0 46.4188 5.58116 52 12.4414 52C18.9597 52 24.3226 46.9612 24.8412 40.5742H27.1589C27.6774 46.9612 33.0403 52 39.5586 52C46.4188 52 52 46.4188 52 39.5586C52 32.6984 46.4188 27.1172 39.5586 27.1172ZM36.0039 9.90234C36.0039 7.94229 37.5985 6.34766 39.5586 6.34766C41.5187 6.34766 43.1133 7.94229 43.1133 9.90234C43.1133 11.8552 41.5302 13.4447 39.5801 13.4565C39.5726 13.4565 39.5651 13.4561 39.5576 13.4561C39.5504 13.4561 39.5433 13.4565 39.5361 13.4565C37.5865 13.4442 36.0039 11.8549 36.0039 9.90234ZM39.5363 15.4877C39.5438 15.4877 39.5511 15.4883 39.5586 15.4883C39.5658 15.4883 39.5729 15.4878 39.58 15.4878C42.5814 15.4967 45.2705 17.2893 46.5958 20.1121C44.6691 21.881 42.1887 22.8516 39.5586 22.8516C36.9277 22.8516 34.4454 21.8803 32.5193 20.1103C33.845 17.2882 36.5345 15.4962 39.5363 15.4877ZM8.88672 9.90234C8.88672 7.94229 10.4814 6.34766 12.4414 6.34766C14.4015 6.34766 15.9961 7.94229 15.9961 9.90234C15.9961 11.8552 14.413 13.4447 12.4629 13.4565C12.4554 13.4565 12.4479 13.4561 12.4404 13.4561C12.4332 13.4561 12.4261 13.4565 12.419 13.4565C10.4693 13.4442 8.88672 11.8549 8.88672 9.90234ZM12.4414 15.4883C12.4486 15.4883 12.4557 15.4878 12.4628 15.4878C15.4627 15.4967 18.1504 17.2874 19.4763 20.1076C17.6222 21.8104 15.1513 22.8516 12.4414 22.8516C9.7305 22.8516 7.25867 21.8096 5.40434 20.1056C6.73085 17.2861 9.41891 15.4962 12.4191 15.4877C12.4266 15.4878 12.4339 15.4883 12.4414 15.4883ZM12.4414 2.03125C18.1816 2.03125 22.8516 6.7012 22.8516 12.4414C22.8516 14.6907 22.1343 16.7755 20.9168 18.4795C19.7797 16.4922 18.0637 14.9867 16.0477 14.1633C17.2574 13.1378 18.0273 11.6087 18.0273 9.90234C18.0273 6.82226 15.5215 4.31641 12.4414 4.31641C9.36132 4.31641 6.85547 6.82226 6.85547 9.90234C6.85547 11.6083 7.62501 13.1372 8.83431 14.1627C6.81799 14.9855 5.10179 16.4906 3.96429 18.4773C2.74777 16.7737 2.03125 14.6897 2.03125 12.4414C2.03125 6.7012 6.7012 2.03125 12.4414 2.03125ZM12.4414 49.9688C6.7012 49.9688 2.03125 45.2988 2.03125 39.5586C2.03125 33.8184 6.7012 29.1484 12.4414 29.1484C18.1816 29.1484 22.8516 33.8184 22.8516 39.5586C22.8516 45.2988 18.1816 49.9688 12.4414 49.9688ZM32.5215 47.2228C33.8511 44.3972 36.5486 42.6055 39.5576 42.6055C42.5667 42.6055 45.2644 44.398 46.5935 47.2247C44.7395 48.9276 42.2685 49.9688 39.5586 49.9688C36.8477 49.9688 34.3759 48.9268 32.5215 47.2228ZM39.5586 40.5742C37.5985 40.5742 36.0039 38.9796 36.0039 37.0195C36.0039 35.0595 37.5985 33.4648 39.5586 33.4648C41.5187 33.4648 43.1133 35.0595 43.1133 37.0195C43.1133 38.9796 41.5187 40.5742 39.5586 40.5742ZM48.034 45.5968C46.8969 43.6096 45.1806 42.1043 43.1643 41.2811C44.3744 40.2556 45.1445 38.7262 45.1445 37.0195C45.1445 33.9394 42.6387 31.4336 39.5586 31.4336C36.4785 31.4336 33.9727 33.9394 33.9727 37.0195C33.9727 38.7259 34.7425 40.2549 35.9521 41.2804C33.9355 42.103 32.219 43.6079 31.0815 45.5945C29.865 43.8908 29.1484 41.8069 29.1484 39.5586C29.1484 33.8184 33.8184 29.1484 39.5586 29.1484C45.2988 29.1484 49.9688 33.8184 49.9688 39.5586C49.9688 41.8079 49.2515 43.8928 48.034 45.5968Z"
                                        fill="#4788FF" />
                                    <path
                                        d="M17.829 34.1433C17.3623 33.8322 16.7318 33.9582 16.4206 34.4249L11.1085 42.3931L8.41895 38.9351C8.07445 38.4923 7.43643 38.4126 6.99372 38.757C6.55091 39.1014 6.47118 39.7394 6.81558 40.1822L10.3703 44.7525C10.563 45.0004 10.8592 45.1446 11.1719 45.1446C11.1843 45.1446 11.1967 45.1444 11.2091 45.1439C11.5353 45.132 11.8359 44.9641 12.017 44.6924L18.1107 35.5517C18.4218 35.085 18.2957 34.4544 17.829 34.1433Z"
                                        fill="#4788FF" />
                                    <path
                                        d="M47.8684 5.61539C48.4293 5.61539 48.884 5.16068 48.884 4.59976C48.884 4.03885 48.4293 3.58414 47.8684 3.58414C47.3075 3.58414 46.8528 4.03885 46.8528 4.59976C46.8528 5.16068 47.3075 5.61539 47.8684 5.61539Z"
                                        fill="#4788FF" />
                                </svg>
                            </div>
                            <div class="mm-cart-text">
                                <h2 class=""><b>  </b></h2>
                                <h2 class=""><b>50</b></h2>
                                <p class="mb-0 text-primary">Total Riders</p>
                            </div>
                        </div>
                    </div>
                    <div class="overlay-image svg-primary">
                        <svg height="100%" viewBox="0 0 264 113" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M108.5 68C82.4829 96.2795 31.0226 108.712 4.54413 112H259C262.2 112 263.333 108.667 263.5 107V6C263.5 1.6 259.167 0.166667 257 0H192.5C172.1 3.2 128 46.6667 108.5 68Z" />
                        </svg>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card card-block card-stretch card-height  position-relative overflow-hidden card-overlay-image">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="mm-cart-image">
                                <svg width="52" height="52" viewBox="0 0 52 52" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M39.2031 23.3594C40.325 23.3594 41.2344 22.45 41.2344 21.3281C41.2344 20.2063 40.325 19.2969 39.2031 19.2969C38.0813 19.2969 37.1719 20.2063 37.1719 21.3281C37.1719 22.45 38.0813 23.3594 39.2031 23.3594Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M43.875 4.0625H41.2344V2.03125C41.2344 0.909391 40.325 0 39.2031 0C38.0813 0 37.1719 0.909391 37.1719 2.03125V4.0625H27.9297V2.03125C27.9297 0.909391 27.0203 0 25.8984 0C24.7766 0 23.8672 0.909391 23.8672 2.03125V4.0625H14.7266V2.03125C14.7266 0.909391 13.8172 0 12.6953 0C11.5735 0 10.6641 0.909391 10.6641 2.03125V4.0625H8.125C3.64488 4.0625 0 7.70738 0 12.1875V43.875C0 48.3551 3.64488 52 8.125 52H23.6641C24.7859 52 25.6953 51.0906 25.6953 49.9688C25.6953 48.8469 24.7859 47.9375 23.6641 47.9375H8.125C5.88494 47.9375 4.0625 46.1151 4.0625 43.875V12.1875C4.0625 9.94744 5.88494 8.125 8.125 8.125H10.6641V10.1562C10.6641 11.2781 11.5735 12.1875 12.6953 12.1875C13.8172 12.1875 14.7266 11.2781 14.7266 10.1562V8.125H23.8672V10.1562C23.8672 11.2781 24.7766 12.1875 25.8984 12.1875C27.0203 12.1875 27.9297 11.2781 27.9297 10.1562V8.125H37.1719V10.1562C37.1719 11.2781 38.0813 12.1875 39.2031 12.1875C40.325 12.1875 41.2344 11.2781 41.2344 10.1562V8.125H43.875C46.1151 8.125 47.9375 9.94744 47.9375 12.1875V23.7656C47.9375 24.8875 48.8469 25.7969 49.9688 25.7969C51.0906 25.7969 52 24.8875 52 23.7656V12.1875C52 7.70738 48.3551 4.0625 43.875 4.0625Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M39.7109 27.4219C32.9347 27.4219 27.4219 32.9347 27.4219 39.7109C27.4219 46.4872 32.9347 52 39.7109 52C46.4872 52 52 46.4872 52 39.7109C52 32.9347 46.4872 27.4219 39.7109 27.4219ZM39.7109 47.9375C35.1749 47.9375 31.4844 44.2471 31.4844 39.7109C31.4844 35.1747 35.1749 31.4844 39.7109 31.4844C44.247 31.4844 47.9375 35.1747 47.9375 39.7109C47.9375 44.2471 44.247 47.9375 39.7109 47.9375Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M42.6562 37.6797H41.7422V35.5469C41.7422 34.425 40.8328 33.5156 39.7109 33.5156C38.5891 33.5156 37.6797 34.425 37.6797 35.5469V39.7109C37.6797 40.8328 38.5891 41.7422 39.7109 41.7422H42.6562C43.7781 41.7422 44.6875 40.8328 44.6875 39.7109C44.6875 38.5891 43.7781 37.6797 42.6562 37.6797Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M30.3672 23.3594C31.489 23.3594 32.3984 22.45 32.3984 21.3281C32.3984 20.2063 31.489 19.2969 30.3672 19.2969C29.2454 19.2969 28.3359 20.2063 28.3359 21.3281C28.3359 22.45 29.2454 23.3594 30.3672 23.3594Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M21.5312 32.1953C22.6531 32.1953 23.5625 31.2859 23.5625 30.1641C23.5625 29.0422 22.6531 28.1328 21.5312 28.1328C20.4094 28.1328 19.5 29.0422 19.5 30.1641C19.5 31.2859 20.4094 32.1953 21.5312 32.1953Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M12.6953 23.3594C13.8171 23.3594 14.7266 22.45 14.7266 21.3281C14.7266 20.2063 13.8171 19.2969 12.6953 19.2969C11.5735 19.2969 10.6641 20.2063 10.6641 21.3281C10.6641 22.45 11.5735 23.3594 12.6953 23.3594Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M12.6953 32.1953C13.8171 32.1953 14.7266 31.2859 14.7266 30.1641C14.7266 29.0422 13.8171 28.1328 12.6953 28.1328C11.5735 28.1328 10.6641 29.0422 10.6641 30.1641C10.6641 31.2859 11.5735 32.1953 12.6953 32.1953Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M12.6953 41.0312C13.8171 41.0312 14.7266 40.1218 14.7266 39C14.7266 37.8782 13.8171 36.9688 12.6953 36.9688C11.5735 36.9688 10.6641 37.8782 10.6641 39C10.6641 40.1218 11.5735 41.0312 12.6953 41.0312Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M21.5312 41.0312C22.6531 41.0312 23.5625 40.1218 23.5625 39C23.5625 37.8782 22.6531 36.9688 21.5312 36.9688C20.4094 36.9688 19.5 37.8782 19.5 39C19.5 40.1218 20.4094 41.0312 21.5312 41.0312Z"
                                        fill="#f57e75" />
                                    <path
                                        d="M21.5312 23.3594C22.6531 23.3594 23.5625 22.45 23.5625 21.3281C23.5625 20.2063 22.6531 19.2969 21.5312 19.2969C20.4094 19.2969 19.5 20.2063 19.5 21.3281C19.5 22.45 20.4094 23.3594 21.5312 23.3594Z"
                                        fill="#f57e75" />
                                </svg>
                            </div>
                            <div class="mm-cart-text">
                                <h2 class=""><b>23</b></h2>
                                <p class="mb-0 text-danger"> Pending Orders</p>
                            </div>
                        </div>
                    </div>
                    <div class="overlay-image svg-danger">
                        <svg height="100%" viewBox="0 0 264 113" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M108.5 68C82.4829 96.2795 31.0226 108.712 4.54413 112H259C262.2 112 263.333 108.667 263.5 107V6C263.5 1.6 259.167 0.166667 257 0H192.5C172.1 3.2 128 46.6667 108.5 68Z" />
                        </svg>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card card-block card-stretch card-height  position-relative overflow-hidden card-overlay-image">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="mm-cart-image text-success">
                                <svg class="svg-icon svg-success mr-4" width="50" height="52" id="h-02" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /> </svg>
                            </div>
                            <div class="mm-cart-text">
                                <h2 class="font-weight-700">289</h2>
                                <p class="mb-0 text-success">Completed Orders</p>
                            </div>
                        </div>
                    </div>
                    <div class="overlay-image svg-danger">
                        <svg height="100%" viewBox="0 0 264 113" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M108.5 68C82.4829 96.2795 31.0226 108.712 4.54413 112H259C262.2 112 263.333 108.667 263.5 107V6C263.5 1.6 259.167 0.166667 257 0H192.5C172.1 3.2 128 46.6667 108.5 68Z" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Users Stats</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="text-center" v-if="!showMorrisChart">
                            <b-spinner variant="primary" type="grow" label="Spinning"></b-spinner>
                        </div>
                        <div v-else>
                            <MorrisChart :element="item.id" :type="item.type" :data="item.bodyData" :colors="item.colors"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Orders Stats</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="text-center" v-if="!showBarChart">
                            <b-spinner variant="primary" type="grow" label="Spinning"></b-spinner>
                        </div>
                        <div v-else>
                            <ApexChart element="hospital-chart-03" :chartOption="chart2" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="card  card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Recent Orders</h4>
                        </div>
                        <div class="card-header-toolbar d-flex align-items-center">
                            <router-link :to="{name: 'app.order-list'}" class="btn btn-outline-primary">View All</router-link>
                        </div>
                    </div>
                    <div class="card-body">
                        <b-table-simple foot-clone responsive outlined striped hover>
                            <b-thead>
                                <b-th>#</b-th>
                                <b-th>Order Type</b-th>
                                <b-th>Item</b-th>
                                <b-th>Quantity</b-th>
                                <b-th>Pickup Location</b-th>
                                <b-th>Dropoff Location</b-th>
                                <b-th>Description</b-th>
                                <b-th>Status</b-th>
                                <b-th>View Details</b-th>
                            </b-thead>
                            <b-tbody>
                                <b-tr v-for="(order, index) in orders" :key="'order' + index">
                                    <b-th>{{index+1}}</b-th>
                                    <b-td>{{order.gender}}</b-td>
                                    <b-td>{{order.age}}</b-td>
                                    <b-td>
                                        <template v-if="order.exposure_risk === 'high'">
                                        <span class="badge badge-danger">High</span>
                                        </template>
                                        <template v-else-if="order.exposure_risk === 'medium'">
                                        <span class="badge badge-warning">Medium</span>
                                        </template>
                                        <template v-else>
                                        <span class="badge badge-success">Low</span>
                                        </template>
                                    </b-td>
                                    <b-td>
                                        <template v-if="order.high_risk_group">
                                        <span class="badge badge-danger">High Risk</span>
                                        </template>
                                        <template v-else>
                                        <span class="badge badge-success">Not High Risk</span>
                                        </template>
                                    </b-td>
                                    <b-td>{{order.date_difference}}</b-td>
                                    <b-td>{{order.county ? order.county : '-'}}</b-td>
                                    <b-td>{{order.state ? order.state : '-'}}</b-td>
                                    <b-td>
                                        <!-- Button to trigger modal -->
                                        <button type="button" class="btn btn-primary btn-sm" data-id="order.id" @click="showModal(order)">
                                        View Order
                                        </button>
                                        <!-- Modal -->
                                        <div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="orderModal" aria-hidden="true">
                                        <div class="modal-dialog modal-xl" role="document">
                                            <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title"><strong>DETAILED ORDER FOR: #{{singleOrder.id}}</strong></h5>
                                                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <order-body :order="singleOrder"></order-body>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                            </div>
                                        </div>
                                        </div>
                                        <!-- ./ Modal -->
                                    </b-td>
                                </b-tr>
                            </b-tbody>
                        </b-table-simple>
                  </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
import {is401} from '../../config/response'
import MorrisChart from '../../components/charts/MorrisChart'
import ApexChart from '../../components/charts/ApexChart'
export default {
    name:'Dashboard',
    beforeCreate() {
        this.$options.components.OrderBody = require('../../views/backend/orders/OrderModal').default
    },
    components:{
        ApexChart,
        MorrisChart
    },
    data(){
        return{
            showMorrisChart: false,
            showBarChart: false,
            item:{
                type:"donut",
                id:"hospital-chart-02",
                colors:  ["#fed81c", "#fe731c", "#ff4b4b"],
                resize: !0,
                hideHover: "auto",
                bodyData: [
                    {
                        label: "low risk",
                        value: 0
                    },
                    {
                        label: "medium risk",
                        value: 0
                    },
                    {
                        label: "high risk",
                        value: 0
                    }
                ],
            },
            chart2:{
                series: [{
                    name: 'low',
                    data: [0,0,0]
                }, {
                    name: 'medium',
                    data: [0,0,0]
                }, {
                    name: 'High',
                    data: [0,0,0]
                }],
                colors: ['#4788ff', '#4fd69c', '#F6375B'],
                chart: {
                    type: 'bar',
                    height: 340,
                    stacked: false,
                    zoom: {
                    enabled: true
                    }
                },
                responsive: [{
                    breakpoint: 580,
                    options: {
                    legend: {
                        position: 'bottom',
                        offsetX: -30,
                        offsetY: 0,
                    }
                    }
                }],
                plotOptions: {
                    bar: {
                    horizontal: false,
                    borderRadius: 4
                    },
                },
                xaxis: {
                    type: 'category',
                    categories: ['0-18', '19-45', '46-60', '65 & above'],
                },
                yaxis: {
                    labels: {
                        offsetY: 0,
                        minWidth: 20,
                        maxWidth: 20,
                    }
                },
                legend: {
                    position: 'top',
                    offsetX: -35
                },
                fill: {
                    opacity: 1
                },
                dataLabels: {
                    enabled: false
                }
            },
            orders: [],
            singleOrder: {},
            pageStats: []
        }
    },
    mounted() {
        this.getPageStats()
    },
    created() {
        this.getOrders()
    },
    methods: {
        async getOrders() {
            try {
                const {data} = await axios.get('/backend/dashboard/orders/10')
                this.orders = data.data
            } catch (error) {
                console.log(error)
                if(is401(error)) {
                    this.$logOut()
                }
            }
        },
        async getPageStats() {
            try {
                const {data} = await axios.get('/backend/dashboard/top-stats')
                this.pageStats = data.data
                let low = [];
                let medium = [];
                let high = [];
                this.chart2.xaxis.categories.forEach((v) => {
                    let d = this.pageStats.age_demographics[v]
                    low.push((typeof d['low'] === 'undefined') ? 0 : d['low'])
                    medium.push((typeof d['medium'] === 'undefined') ? 0 : d['medium'])
                    high.push((typeof d['high'] === 'undefined') ? 0 : d['high'])
                })
                this.chart2.series[0].data = low
                this.chart2.series[1].data = medium
                this.chart2.series[2].data = high

                this.item.bodyData[0].value = data.data.risk_by_category.filter((arr) => arr.exposure_risk === 'low')[0].total
                this.item.bodyData[1].value = data.data.risk_by_category.filter((arr) => arr.exposure_risk === 'medium')[0].total
                this.item.bodyData[2].value = data.data.risk_by_category.filter((arr) => arr.exposure_risk === 'high')[0].total
                this.showMorrisChart = true
                this.showBarChart = true
            } catch (error) {
                console.log(error)
                if(is401(error)) {
                    this.$logOut()
                }
            }
        },
        showModal(order) {
            this.singleOrder = {}
            $('#orderModal').modal('show')
            this.singleOrder = order
        }
    }
}
</script>
