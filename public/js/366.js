(self.webpackChunk=self.webpackChunk||[]).push([[366],{4323:(t,e,n)=>{"use strict";n.d(e,{qc:()=>r,jE:()=>a,tl:()=>s,M$:()=>i});var r=function(t){return o(t)&&400===t.response.status},a=function(t){return o(t)&&401===t.response.status},s=function(t){return o(t)&&403===t.response.status},i=function(t){return o(t)&&422===t.response.status},o=function(t){return t.response&&t.response.status}},3366:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var r=n(7757),a=n.n(r),s=n(629),i=n(4323);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e,n,r,a,s,i){try{var o=t[s](i),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function i(t){d(s,r,a,i,o,"next",t)}function o(t){d(s,r,a,i,o,"throw",t)}i(void 0)}))}}const l={name:"UnreadNotifications",created:function(){this.getUnread()},mounted:function(){var t=this;return f(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$broadcast();case 2:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1}},computed:c({},(0,s.Se)({notifications:"notifications/unread"})),methods:c(c({},(0,s.nv)({getNotifications:"notifications/getNotifications",markNotification:"notifications/markAsRead"})),{},{getUnread:function(){var t=this;return f(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0;try{t.getNotifications("unread")}catch(e){console.log(e),(0,i.jE)(e)&&t.$logOut(),(0,i.tl)(e)&&t.$toasted.error("Kindly verify your account before performing any actions!")}t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},markAsRead:function(t){var e=this;return f(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.markNotification(t);case 3:return r=n.sent,n.next=6,e.$toasted.success(r);case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),e.$toasted.error("Something went wrong");case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}})};const v=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"card card-block card-stretch card-height"},[t._m(0),t._v(" "),n("div",{staticClass:"card-body"},[n("b-table-simple",{attrs:{responsive:""}},[n("b-thead",[n("b-th",[t._v("#")]),t._v(" "),n("b-th",[t._v("Type")]),t._v(" "),n("b-th",[t._v("Message")]),t._v(" "),n("b-th",[t._v("Created Date")]),t._v(" "),n("b-th",[t._v("Actions")])],1),t._v(" "),t.loading?n("b-tr",{staticClass:"text-center"},[n("b-td"),t._v(" "),n("b-td"),t._v(" "),n("b-td",[n("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1),t._v(" "),n("b-td"),t._v(" "),n("b-td")],1):t.notifications.length>0?n("b-tbody",t._l(t.notifications,(function(e,r){return n("b-tr",{key:"notification"+r},[n("b-th",[t._v(t._s(r+1))]),t._v(" "),n("b-td",[t._v(t._s(t._f("formatType")(e.type)))]),t._v(" "),n("b-td",[t._v(t._s(e.data.message))]),t._v(" "),n("b-td",[t._v(t._s(t._f("dateFilter")(e.created_at)))]),t._v(" "),n("b-td",[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(n){return t.markAsRead(e.id)}}},[t._v("\n                                Mark as Read\n                             ")])])],1)})),1):n("b-tbody",[n("b-tr",{staticClass:"text-center"},[n("b-td",{attrs:{colspan:"6"}},[t._v("No result match your search.")])],1)],1)],1)],1)])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header d-flex justify-content-between"},[n("div",{staticClass:"header-title"},[n("h4",{staticClass:"card-title mb-0"},[t._v("Unread Notifications")])])])}],!1,null,null,null).exports}}]);