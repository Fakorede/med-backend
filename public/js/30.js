(self.webpackChunk=self.webpackChunk||[]).push([[30],{4323:(t,e,a)=>{"use strict";a.d(e,{qc:()=>r,jE:()=>s,tl:()=>o,M$:()=>n});var r=function(t){return i(t)&&400===t.response.status},s=function(t){return i(t)&&401===t.response.status},o=function(t){return i(t)&&403===t.response.status},n=function(t){return i(t)&&422===t.response.status},i=function(t){return t.response&&t.response.status}},3375:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(3645),s=a.n(r)()((function(t){return t[1]}));s.push([t.id,".clear-filters[data-v-6bf422be]{color:darkred;cursor:pointer;float:right;font-style:italic;text-decoration:underline}",""]);const o=s},1141:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(3645),s=a.n(r)()((function(t){return t[1]}));s.push([t.id,".prc-box[data-v-4b24f445]{padding:5px}",""]);const o=s},2030:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>b});var r=a(7757),s=a.n(r),o=a(7216),n=a(4323);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t,e,a,r,s,o,n){try{var i=t[o](n),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,s)}function p(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var o=t.apply(e,a);function n(t){d(o,r,s,n,i,"next",t)}function i(t){d(o,r,s,n,i,"throw",t)}n(void 0)}))}}const u={name:"OrderList",components:{OrderBody:o.Z},mounted:function(){var t=this;return p(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getOrders();case 2:return e.next=4,t.$broadcast();case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1,downloading:!1,orders:{},singleOrder:{},params:{perPage:10,sort_field:"created_at",sort_direction:"desc",order_type:"",order_status:"",payment_status:"",personnel_option:""},otherSymptoms:[],coughSymptoms:[],breathingSymptoms:[],severitySymptoms:[],locations:[],counties:null}},watch:{params:{handler:function(){"all"===this.params.gender&&(this.params.gender=""),this.getOrders()},deep:!0}},methods:{getOrders:function(){var t=arguments,e=this;return p(s().mark((function a(){var r,o;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,e.loading=!0,a.prev=2,a.next=5,axios.get("/api/admin/orders/"+e.params.perPage,{params:c({page:r},e.params),headers:{Authorization:"Bearer ".concat(localStorage.getItem("sserpxe_cigam"))}});case 5:o=a.sent,e.loading=!1,e.orders=o.data,a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0),e.loading=!1,(0,n.jE)(a.t0)&&e.$logOut();case 15:case"end":return a.stop()}}),a,null,[[2,10]])})))()},changeSort:function(t){var e=this;return p(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.params.sort_field===t?e.params.sort_direction="asc"===e.params.sort_direction?"desc":"asc":(e.params.sort_field=t,e.params.sort_direction="asc"),e.getOrders();case 2:case"end":return a.stop()}}),a)})))()},showModal:function(t){this.singleOrder={},$("#orderModal").modal("show"),this.singleOrder=t},changePageParam:function(t){this.params.perPage=parseInt(t)},countyInState:function(t){},clearFilters:function(){},downloadData:function(){return p(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},forceDownload:function(t){}}};var m=a(3379),_=a.n(m),v=a(3375),f={insert:"head",singleton:!1};_()(v.Z,f);v.Z.locals;const b=(0,a(1900).Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-3 col-lg-4"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[t._m(1),a("label",{staticClass:"clear-filters",on:{click:t.clearFilters}},[t._v("clear filters")]),t._v(" "),a("b-datepicker",{attrs:{size:"sm","hide-header":!0,id:"datepicker-buttons",placeholder:"Filter by date","today-button":"","reset-button":"","close-button":""},model:{value:t.params.date,callback:function(e){t.$set(t.params,"date",e)},expression:"params.date"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(2),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_type,expression:"params.order_type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Dispatch",name:"order_type",value:"Dispatch"},domProps:{checked:t._q(t.params.order_type,"Dispatch")},on:{change:function(e){return t.$set(t.params,"order_type","Dispatch")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Dispatch"}},[t._v("Dispatch")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_type,expression:"params.order_type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Errand",name:"order_type",value:"Errand"},domProps:{checked:t._q(t.params.order_type,"Errand")},on:{change:function(e){return t.$set(t.params,"order_type","Errand")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Errand"}},[t._v(" Errand ")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_type,expression:"params.order_type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"all",name:"order_type",checked:"checked",value:"all"},domProps:{checked:t._q(t.params.order_type,"all")},on:{change:function(e){return t.$set(t.params,"order_type","all")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"all"}},[t._v(" All ")])])]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(3),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Created",name:"order_status",value:"Created"},domProps:{checked:t._q(t.params.order_status,"Created")},on:{change:function(e){return t.$set(t.params,"order_status","Created")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Created"}},[t._v("Created")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Processed",name:"order_status",value:"Processed"},domProps:{checked:t._q(t.params.order_status,"Processed")},on:{change:function(e){return t.$set(t.params,"order_status","Processed")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Processed"}},[t._v("Processed")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Assigned",name:"order_status",value:"Assigned"},domProps:{checked:t._q(t.params.order_status,"Assigned")},on:{change:function(e){return t.$set(t.params,"order_status","Assigned")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Assigned"}},[t._v("Assigned")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"In-Transit",name:"order_status",value:"In-Transit"},domProps:{checked:t._q(t.params.order_status,"In-Transit")},on:{change:function(e){return t.$set(t.params,"order_status","In-Transit")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"In-Transit"}},[t._v("In Transit")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Delivered",name:"order_status",value:"Delivered"},domProps:{checked:t._q(t.params.order_status,"Delivered")},on:{change:function(e){return t.$set(t.params,"order_status","Delivered")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Delivered"}},[t._v("Delivered")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.order_status,expression:"params.order_status"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"all",name:"order_status",checked:"checked",value:"all"},domProps:{checked:t._q(t.params.order_status,"all")},on:{change:function(e){return t.$set(t.params,"order_status","all")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"all"}},[t._v(" All ")])])]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(4),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.personnel_option,expression:"params.personnel_option"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Sender",name:"personnel_option",value:"Sender"},domProps:{checked:t._q(t.params.personnel_option,"Sender")},on:{change:function(e){return t.$set(t.params,"personnel_option","Sender")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Sender"}},[t._v("Sender")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.personnel_option,expression:"params.personnel_option"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Receiver",name:"personnel_option",value:"Receiver"},domProps:{checked:t._q(t.params.personnel_option,"Receiver")},on:{change:function(e){return t.$set(t.params,"personnel_option","Receiver")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Receiver"}},[t._v(" Receiver ")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.personnel_option,expression:"params.personnel_option"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"Third-party",name:"personnel_option",value:"Third-party"},domProps:{checked:t._q(t.params.personnel_option,"Third-party")},on:{change:function(e){return t.$set(t.params,"personnel_option","Third-party")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"Third-party"}},[t._v(" Third-party ")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.personnel_option,expression:"params.personnel_option"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"all",name:"personnel_option",checked:"checked",value:"all"},domProps:{checked:t._q(t.params.personnel_option,"all")},on:{change:function(e){return t.$set(t.params,"personnel_option","all")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"all"}},[t._v(" All ")])])]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(5),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox custom-checkbox-color-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.payment_status,expression:"params.payment_status"}],staticClass:"custom-control-input bg-primary",attrs:{name:"payment_status",id:"payment_status",type:"checkbox",value:"Paid"},domProps:{checked:Array.isArray(t.params.payment_status)?t._i(t.params.payment_status,"Paid")>-1:t.params.payment_status},on:{change:function(e){var a=t.params.payment_status,r=e.target,s=!!r.checked;if(Array.isArray(a)){var o="Paid",n=t._i(a,o);r.checked?n<0&&t.$set(t.params,"payment_status",a.concat([o])):n>-1&&t.$set(t.params,"payment_status",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.params,"payment_status",s)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"payment_status"}},[t._v(" YES ")])])])])])])]),t._v(" "),a("div",{staticClass:"col-xl-9 col-lg-8"},[a("div",{staticClass:"card card-block card-stretch card-height"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("div",{staticClass:"header-title"},[a("h4",{staticClass:"card-title mb-0"},[t._v("All Orders"),a("small",[t._v(" ( "+t._s(t.orders.total)+" total orders)")])])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("b-table-simple",{attrs:{responsive:"",hover:""}},[a("b-thead",[a("b-th",[t._v("Amount(₦)")]),t._v(" "),a("b-th",[t._v("Pickup Address")]),t._v(" "),a("b-th",[t._v("Dropoff Address")]),t._v(" "),a("b-th",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeSort("order_type")}}},[t._v("Order Type")]),t._v(" "),"order_type"==t.params.sort_field&&"asc"==t.params.sort_direction?a("span",[t._v("↑")]):t._e(),t._v(" "),"order_type"==t.params.sort_field&&"desc"==t.params.sort_direction?a("span",[t._v("↓")]):t._e()]),t._v(" "),a("b-th",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeSort("order_status")}}},[t._v("Order Status")]),t._v(" "),"order_status"==t.params.sort_field&&"asc"==t.params.sort_direction?a("span",[t._v("↑")]):t._e(),t._v(" "),"order_status"==t.params.sort_field&&"desc"==t.params.sort_direction?a("span",[t._v("↓")]):t._e()]),t._v(" "),a("b-th",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeSort("created_at")}}},[t._v("Order Date")]),t._v(" "),"created_at"==t.params.sort_field&&"asc"==t.params.sort_direction?a("span",[t._v("↑")]):t._e(),t._v(" "),"created_at"==t.params.sort_field&&"desc"==t.params.sort_direction?a("span",[t._v("↓")]):t._e()]),t._v(" "),a("b-th",[t._v("View Details")])],1),t._v(" "),t.loading?a("b-tr",{staticClass:"text-center"},[a("b-td"),t._v(" "),a("b-td"),t._v(" "),a("b-td"),t._v(" "),a("b-td",[a("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1),t._v(" "),a("b-td"),t._v(" "),a("b-td")],1):t.orders.data.length>0?a("b-tbody",t._l(t.orders.data,(function(e,r){return a("b-tr",{key:"order"+r},[a("b-td",[t._v("₦"+t._s((new Intl.NumberFormat).format(e.total_price)))]),t._v(" "),a("b-td",[t._v(t._s(e.pickup_address))]),t._v(" "),a("b-td",[t._v(t._s(e.dropoff_address))]),t._v(" "),a("b-td",["Dispatch"===e.order_type?[a("span",{staticClass:"badge badge-primary"},[t._v("\n                                "+t._s(e.order_type)+"\n                              ")])]:t._e(),t._v(" "),"Errand"===e.order_type?[a("span",{staticClass:"badge badge-info"},[t._v("\n                                "+t._s(e.order_type)+"\n                              ")])]:t._e()],2),t._v(" "),a("b-td",[t._v(t._s(e.order_status))]),t._v(" "),a("b-td",[t._v(t._s(t._f("dateFilter")(e.created_at)))]),t._v(" "),a("b-td",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button","data-id":"order.id"},on:{click:function(a){return t.showModal(e)}}},[a("small",[t._v("view order")])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"orderModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[a("strong",[t._v("DETAILED RESPONSE FOR: #"+t._s(t.singleOrder.id))])]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("order-body",{attrs:{order:t.singleOrder}})],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Close")])])])])])])],1)})),1):a("b-tbody",[a("b-tr",{staticClass:"text-center"},[a("b-td",{attrs:{colspan:"6"}},[t._v(" No result match your search.")])],1)],1)],1),t._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-xl-4 col-lg-5"},[a("div",{staticClass:"card-header-toolbar d-flex"},[t._v("\n                              Per page:   "),a("b-dropdown",{staticClass:"dropdown shadow-none",attrs:{id:"dropdownMenuButton1",right:"",variant:"none p-0","data-toggle":"dropdown"},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("span",{staticClass:"dropdown-toggle dropdown-bg btn btn-outline-primary btn-sm",attrs:{id:"dropdownMenuButton4","data-toggle":"dropdown","aria-expanded":"false"}},[t._v("\n                                        "+t._s(t.params.perPage)+" "),a("i",{staticClass:"ri-arrow-down-s-line ml-1"})])]},proxy:!0}])},[t._v(" "),a("b-dropdown-item",{on:{click:function(e){return t.changePageParam(10)}}},[t._v(t._s("10"))]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){return t.changePageParam(20)}}},[t._v(t._s("20"))]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){return t.changePageParam(50)}}},[t._v(t._s("50"))]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){return t.changePageParam(100)}}},[t._v(t._s("100"))])],1)],1)]),t._v(" "),a("div",{staticClass:"col-xl-8 col-lg-7"},[a("pagination",{attrs:{data:t.orders,limit:1},on:{"pagination-change-page":t.getOrders}})],1)])],1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header d-flex justify-content-between"},[a("div",{staticClass:"header-title"},[a("h4",{staticClass:"card-title"},[a("a",{staticClass:"btn btn-primary btn-sm",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-filter"})]),t._v(" FILTER\n                         ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Date:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Order Type:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Order Status:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Personnel Option:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("PAID ?")])])}],!1,null,"6bf422be",null).exports},7216:(t,e,a)=>{"use strict";a.d(e,{Z:()=>c});const r={name:"OrderBody",props:["order","loading"]};var s=a(3379),o=a.n(s),n=a(1141),i={insert:"head",singleton:!1};o()(n.Z,i);n.Z.locals;const c=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t.loading?[t._v("Loading...")]:void 0],2)}),[],!1,null,"4b24f445",null).exports}}]);